# 文件传输功能 (LocalSend 风格)

这是一个类似 LocalSend 的文件传输功能实现，允许在同一网络下的设备之间快速传输文件。

## 功能特性

### 🖥️ 设备信息显示
- 顶部显示当前设备信息
- **用户头像和昵称**: 支持自定义头像上传和昵称编辑
- 显示设备名称、IP地址和端口
- 在线状态指示
- 一键复制IP地址和端口信息

### 👤 个人资料管理
- **头像上传**: 点击头像可上传自定义图片
- **昵称编辑**: 点击昵称旁的编辑按钮可修改昵称
- **本地存储**: 头像和昵称信息保存在本地存储中
- **初始头像**: 未上传头像时显示昵称首字母

### 📥 文件接收
- 等待其他设备发送文件
- 实时显示传输进度
- 支持多文件同时接收
- 显示发送方设备信息
- 传输状态管理（等待中、传输中、已完成、失败）

### 📤 文件发送
- 支持选择多个文件
- 拖拽文件到选择区域
- 自动发现同网络设备
- 设备类型识别（手机、电脑、平板）
- 设备在线状态检测
- 文件大小统计

### 🔍 设备发现
- 自动扫描同网络设备
- 显示设备类型和状态
- 支持手动刷新设备列表

### 📊 传输管理
- 传输历史记录
- 下载文件夹快速访问
- 传输状态实时更新
- 支持取消传输

## 技术实现

### 组件结构
```
file-transmission/
├── index.tsx              # 主组件，状态管理
├── components/
│   ├── device-info.tsx    # 设备信息栏（含头像昵称）
│   ├── sidebar.tsx        # 左侧功能栏
│   ├── receive-files.tsx  # 文件接收界面
│   └── send-files.tsx     # 文件发送界面
└── README.md
```

### 主要功能
1. **设备信息获取**: 通过 Navigator API 获取设备信息
2. **个人资料管理**: 头像上传、昵称编辑、本地存储
3. **文件选择**: 使用 HTML5 File API 处理文件选择
4. **状态管理**: React useState 管理界面状态切换
5. **UI组件**: 基于 shadcn/ui 组件库构建现代化界面

### 界面布局
- **顶部**: 设备信息栏，显示头像、昵称、设备名、IP、在线状态
- **左侧**: 功能导航栏，包含接收/发送文件、设备发现、设置等
- **右侧**: 主要工作区域，根据选择的功能显示不同界面

## 使用方法

### 个人资料设置
1. **更换头像**: 点击头像区域选择图片文件上传
2. **修改昵称**: 点击昵称旁的编辑图标，输入新昵称后按回车保存
3. **重置设置**: 清除浏览器本地存储可重置头像和昵称

### 接收文件
1. 点击左侧"接收文件"按钮
2. 界面显示接收准备状态
3. 其他设备可向此IP地址发送文件
4. 实时查看传输进度和状态

### 发送文件
1. 点击左侧"发送文件"按钮
2. 选择要发送的文件（支持多选）
3. 选择目标设备
4. 点击"发送文件"开始传输

### 设备发现
- 应用会自动扫描同网络下的设备
- 显示设备类型（手机、电脑、平板）
- 显示设备在线状态

## 新增功能详解

### 头像功能
- **支持格式**: JPG, PNG, GIF等常见图片格式
- **存储方式**: Base64编码存储在localStorage
- **默认显示**: 未设置头像时显示昵称首字母
- **交互方式**: 点击头像区域即可上传

### 昵称功能
- **编辑方式**: 点击昵称旁的编辑图标
- **快捷键**: Enter保存，Escape取消
- **验证**: 自动去除首尾空格
- **持久化**: 保存在localStorage中

## 待实现功能

### 网络通信
- [ ] WebRTC 点对点连接
- [ ] HTTP 服务器搭建
- [ ] 设备发现协议（mDNS/Bonjour）
- [ ] 文件传输协议

### 安全性
- [ ] 传输加密
- [ ] 设备认证
- [ ] 传输确认机制

### 性能优化
- [ ] 大文件分块传输
- [ ] 断点续传
- [ ] 传输速度优化

### 用户体验
- [ ] 拖拽文件支持
- [ ] 传输通知
- [ ] 错误处理和重试
- [ ] 多语言支持
- [ ] 头像裁剪功能
- [ ] 更多个性化设置

## 技术栈

- **前端框架**: React + TypeScript
- **UI组件**: shadcn/ui (基于 Radix UI)
- **样式**: Tailwind CSS
- **图标**: Lucide React
- **桌面应用**: Electron

## 开发说明

当前实现主要是UI界面和交互逻辑，实际的网络通信功能需要进一步开发。建议使用以下技术：

1. **设备发现**: 使用 mDNS 或 UDP 广播
2. **文件传输**: HTTP 服务器 + WebSocket 或 WebRTC
3. **跨平台**: Electron 主进程处理网络和文件系统操作

这个实现提供了完整的用户界面和交互体验，包括个性化的头像和昵称功能，为后续的网络功能开发奠定了良好的基础。 